<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-google-dfp/spec/DfpUtils-spec.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">node-google-dfp/spec/DfpUtils-spec.js</span></h1>
    <h2>
        Statements: <span class="metric">100% <small>(32 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">100% <small>(0 / 0)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">100% <small>(11 / 11)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">100% <small>(32 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">node-google-dfp/spec/</a> &#187; DfpUtils-spec.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</td><td class="line-coverage"><span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var DfpUtils = require('../lib/DfpUtils');
&nbsp;
describe("DfpUtils", function () {
  describe(".DfpDate.from", function () {
    it("should convert JS Date to DFP", function () {
      var curr_date = new Date(),
        dfp_date    = DfpUtils.DfpDate.from(new Date(), 'America/Toronto'),
        result      = { date : {
          year  : curr_date.getFullYear(),
          month : curr_date.getMonth() + 1,
          day   : curr_date.getDate()
        },
          hour       : curr_date.getHours(),
          minute     : curr_date.getMinutes(),
          second     : dfp_date.second,
          timeZoneID : dfp_date.timeZoneID
          };
&nbsp;
      expect(dfp_date.date.year).toBe(result.date.year);
      expect(dfp_date.date.month).toBe(result.date.month);
      expect(dfp_date.date.day).toBe(result.date.day);
&nbsp;
      expect(dfp_date.hour).toBe(result.hour);
      expect(dfp_date.minute).toBe(result.minute);
    });
  });
  describe(".DfpDate.to", function () {
    it("should convert DFP Date to JS", function () {
      var curr_date = new Date(),
        dfp_date    = { date : {
          year  : curr_date.getFullYear(),
          month : curr_date.getMonth(),
          day   : curr_date.getDate()
        },
          hour       : curr_date.getHours(),
          minute     : curr_date.getMinutes(),
          second     : curr_date.getSeconds(),
          timeZoneID : 'America/Toronto'
          },
      js_date         = DfpUtils.DfpDate.to(dfp_date);
&nbsp;
      expect(js_date.getFullYear()).toBe(curr_date.getFullYear());
      expect(js_date.getMonth()).toBe(curr_date.getMonth());
      expect(js_date.getDate()).toBe(curr_date.getDate());
&nbsp;
      expect(js_date.getHours()).toBe(curr_date.getHours());
      expect(js_date.getMinutes()).toBe(curr_date.getMinutes());
      expect(js_date.getSeconds()).toBe(curr_date.getSeconds());
    });
  });
  describe(".Statement", function () {
    it("should convert query to DFP Statement", function () {
      var dfp_statement = new DfpUtils.Statement('WHERE id &gt; 10 LIMIT 10'),
        expected_query  = {
          filterStatement : {
            query : 'WHERE id &gt; 10 LIMIT 10'
          }
        };
      expect(dfp_statement.filterStatement.query).toBe(expected_query.filterStatement.query);
    });
  });
  describe(".Money", function () {
    it("should convert money to DFP micro amounts", function () {
      var dfp_statement = new DfpUtils.Money(5.7, 'CAD'),
        expected_query  = {
          currencyCode  : 'CAD',
          microAmount   : 5700000
        };
      expect(dfp_statement.currencyCode).toBe(expected_query.currencyCode);
      expect(dfp_statement.microAmount).toBe(expected_query.microAmount);
    });
  });
  describe(".assetByteArray", function () {
    it("should convert image to assetByteArray", function () {
      var dfp_image     = DfpUtils.assetByteArray('./spec/FF4D00-0.8.png'),
        expected_image  = "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX/TQBcNTh/AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=";
      expect(dfp_image).toBe(expected_image);
    });
  });
});</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Jul 29 2015 13:37:27 GMT-0400 (EDT)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
